# Name: manual_thermostat_control.yaml
# Author: Sebastian Sopola @ https://www.linkedin.com/in/sebastiansopola/
# Description: This file containts the automation to provide smart manual thermostat control



- id: manual_thermostat_control
  alias: Manual Thermostat Control
  trigger:
  - platform: state
    entity_id: climate.virtual_thermostat
  action:
  - wait_template: >
      {{ state_attr('climate.virtual_thermostat', 'temperature') is not none }}
    timeout: '00:00:15' # Wait for up to 15 seconds
    continue_on_timeout: 'false' # Stop automation if temperature doesn't become available
  - service: climate.set_temperature
    data_template:
      temperature: '{{ state_attr(''climate.virtual_thermostat'', ''temperature'') }}'
    entity_id:
    - climate.olohuone_vasen
    - climate.olohuone_oikea
    - climate.keittio
    - climate.vierashuone
    - climate.makuuhuone
    - climate.paamakuuhuone