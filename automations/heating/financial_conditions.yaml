# Name: financial_conditions.yaml
# Author: Sebastian Sopola @ https://www.linkedin.com/in/sebastiansopola/
# Description: This file containts the automations to evaluate financial conditions. Utilizing rules provided by blueprint.



- id: entrance_financial_conditions
  alias: Evaluate financial conditions for entrance
  description: Evaluate financial conditions while determining heating strategy for entrance.
  use_blueprint:
    path: homeassistant/heating/financial_conditions.yaml
    input:
      user: mobile_app_sebastians_iphone
      price_treshold: input_number.price_treshold
      price_trend: sensor.price_trend
      current_year_average_price: sensor.current_year_average_price
      nordpool: sensor.nordpool_kwh_fi_eur_2_10_0255
      room_name: "Entrance"
      room_temperature: sensor.entrance_temperature_and_humidity_sensor_temperature
      min_temperature: input_number.entrance_min_temperature
      max_temperature: input_number.entrance_max_temperature
      coefficient: sensor.coefficient
      outdoor_temperature: sensor.outdoor_temperature_and_humidity_sensor_temperature
      target_temperature: input_number.entrance_target_temperature
      living_space: input_number.entrance_living_space
      heating_schedule_start_time: input_datetime.entrance_heating_schedule_start_time
      heating_schedule_end_time: input_datetime.entrance_heating_schedule_end_time 
      pipeline_settings: sensor.entrance_pipeline

- id: kitchen_financial_conditions
  alias: Evaluate financial conditions for kitchen
  description: Evaluate financial conditions while determining heating strategy for kitchen. Use rules provided by blueprint rooms conditions 
  use_blueprint:
    path: homeassistant/heating/financial_conditions.yaml
    input:
      user: mobile_app_sebastians_iphone
      price_treshold: input_number.price_treshold
      price_trend: sensor.price_trend
      current_year_average_price: sensor.current_year_average_price
      nordpool: sensor.nordpool_kwh_fi_eur_2_10_0255
      room_name: "Kitchen"
      room_temperature: sensor.kitchen_temperature_and_humidity_sensor_temperature
      min_temperature: input_number.kitchen_min_temperature
      max_temperature: input_number.kitchen_max_temperature
      coefficient: sensor.coefficient
      outdoor_temperature: sensor.outdoor_temperature_and_humidity_sensor_temperature
      target_temperature: input_number.kitchen_target_temperature
      living_space: input_number.kitchen_living_space
      heating_schedule_start_time: input_datetime.kitchen_heating_schedule_start_time
      heating_schedule_end_time: input_datetime.kitchen_heating_schedule_end_time 
      pipeline_settings: sensor.kitchen_pipeline

- id: bedroom_financial_conditions
  alias: Evaluate financial conditions for bedroom
  description: Evaluate financial conditions while determining heating strategy for bedroom.
  use_blueprint:
    path: homeassistant/heating/financial_conditions.yaml
    input:
      user: mobile_app_sebastians_iphone
      price_treshold: input_number.price_treshold
      price_trend: sensor.price_trend
      current_year_average_price: sensor.current_year_average_price
      nordpool: sensor.nordpool_kwh_fi_eur_2_10_0255
      room_name: "Bedroom"
      room_temperature: sensor.bedroom_temperature_and_humidity_sensor_temperature
      min_temperature: input_number.bedroom_min_temperature
      max_temperature: input_number.bedroom_max_temperature
      coefficient: sensor.coefficient
      outdoor_temperature: sensor.outdoor_temperature_and_humidity_sensor_temperature
      target_temperature: input_number.bedroom_target_temperature
      living_space: input_number.bedroom_living_space
      heating_schedule_start_time: input_datetime.bedroom_heating_schedule_start_time
      heating_schedule_end_time: input_datetime.bedroom_heating_schedule_end_time
      pipeline_settings: sensor.bedroom_pipeline

- id: living_room_financial_conditions
  alias: Evaluate financial conditions for living room
  description: Evaluate financial conditions while determining heating strategy for living room.
  use_blueprint:
    path: homeassistant/heating/financial_conditions.yaml
    input:
      user: mobile_app_sebastians_iphone
      price_treshold: input_number.price_treshold
      price_trend: sensor.price_trend
      current_year_average_price: sensor.current_year_average_price
      nordpool: sensor.nordpool_kwh_fi_eur_2_10_0255
      room_name: "Living_Room"
      room_temperature: sensor.living_room_temperature_and_humidity_sensor_temperature
      min_temperature: input_number.living_room_min_temperature
      max_temperature: input_number.living_room_max_temperature
      coefficient: sensor.coefficient
      outdoor_temperature: sensor.outdoor_temperature_and_humidity_sensor_temperature
      target_temperature: input_number.living_room_target_temperature
      living_space: input_number.living_room_living_space
      heating_schedule_start_time: input_datetime.living_room_heating_schedule_start_time
      heating_schedule_end_time: input_datetime.living_room_heating_schedule_end_time 
      pipeline_settings: sensor.living_room_pipeline

- id: main_bedroom_financial_conditions
  alias: Evaluate financial conditions for main bedroom
  description: Evaluate financial conditions while determining heating strategy for main bedroom.
  use_blueprint:
    path: homeassistant/heating/financial_conditions.yaml
    input:
      user: mobile_app_sebastians_iphone
      price_treshold: input_number.price_treshold
      price_trend: sensor.price_trend
      current_year_average_price: sensor.current_year_average_price
      nordpool: sensor.nordpool_kwh_fi_eur_2_10_0255
      room_name: "Main_Bedroom"
      room_temperature: sensor.main_bedroom_temperature_and_humidity_sensor_temperature
      min_temperature: input_number.main_bedroom_min_temperature
      max_temperature: input_number.main_bedroom_max_temperature
      coefficient: sensor.coefficient
      outdoor_temperature: sensor.outdoor_temperature_and_humidity_sensor_temperature
      target_temperature: input_number.main_bedroom_target_temperature
      living_space: input_number.main_bedroom_living_space
      heating_schedule_start_time: input_datetime.main_bedroom_heating_schedule_start_time
      heating_schedule_end_time: input_datetime.main_bedroom_heating_schedule_end_time 
      pipeline_settings: sensor.main_bedroom_pipeline

- id: guest_bedroom_financial_conditions
  alias: Evaluate financial conditions for guest bedroom
  description: Evaluate financial conditions while determining heating strategy for guest bedroom.
  use_blueprint:
    path: homeassistant/heating/financial_conditions.yaml
    input:
      user: mobile_app_sebastians_iphone
      price_treshold: input_number.price_treshold
      price_trend: sensor.price_trend
      current_year_average_price: sensor.current_year_average_price
      nordpool: sensor.nordpool_kwh_fi_eur_2_10_0255
      room_name: "Guest_Bedroom"
      room_temperature: sensor.guest_bedroom_temperature_and_humidity_sensor_temperature
      min_temperature: input_number.guest_bedroom_min_temperature
      max_temperature: input_number.guest_bedroom_max_temperature
      coefficient: sensor.coefficient
      outdoor_temperature: sensor.outdoor_temperature_and_humidity_sensor_temperature
      target_temperature: input_number.guest_bedroom_target_temperature
      living_space: input_number.guest_bedroom_living_space
      heating_schedule_start_time: input_datetime.guest_bedroom_heating_schedule_start_time
      heating_schedule_end_time: input_datetime.guest_bedroom_heating_schedule_end_time 
      pipeline_settings: sensor.guest_bedroom_pipeline