# Name: data_collection.yaml
# Author: Sebastian Sopola @ https://www.linkedin.com/in/sebastiansopola/
# Description: This file containts the automation to check that all necessary data is available



- id: entrance_data_collection
  alias: Entrance data collection
  description: Check that all data is available before proceeding to data processing
  use_blueprint:
    path: homeassistant/heating/data_collection.yaml
    input:
      room_name: "Entrance"
      coefficient: sensor.coefficient
      outdoor_temperature: sensor.outdoor_temperature_and_humidity_sensor_temperature
      nordpool: sensor.nordpool_kwh_fi_eur_2_10_0255
      room_temperature: sensor.entrance_temperature_and_humidity_sensor_temperature
      room_size: input_boolean.entrance_living_space
      min_temperature: input_boolean.entrance_min_temperature  
      max_temperature: input_boolean.entrance_max_temperature 
      heating_schedule_start_time: input_datetime.entrance_heating_schedule_start_time
      heating_schedule_end_time: input_datetime.entrance_heating_schedule_end_time
      current_year_average_price: sensor.current_year_average_price 
      pipeline_settings: sensor.entrance_pipeline  

- id: kitchen_data_collection
  alias: Kitchen data collection
  description: Check that all data is available before proceeding to data processing
  use_blueprint:
    path: homeassistant/heating/data_collection.yaml
    input:
      room_name: "Kitchen"
      coefficient: sensor.coefficient
      outdoor_temperature: sensor.outdoor_temperature_and_humidity_sensor_temperature
      nordpool: sensor.nordpool_kwh_fi_eur_2_10_0255
      room_temperature: sensor.kitchen_temperature_and_humidity_sensor_temperature
      room_size: input_boolean.kitchen_living_space
      min_temperature: input_boolean.kitchen_min_temperature  
      max_temperature: input_boolean.kitchen_max_temperature 
      heating_schedule_start_time: input_datetime.kitchen_heating_schedule_start_time
      heating_schedule_end_time: input_datetime.kitchen_heating_schedule_end_time
      current_year_average_price: sensor.current_year_average_price 
      pipeline_settings: sensor.kitchen_pipeline

- id: bedroom_data_collection
  alias: Bedroom data collection
  description: Check that all data is available before proceeding to data processing
  use_blueprint:
    path: homeassistant/heating/data_collection.yaml
    input:
      room_name: "Bedroom"
      coefficient: sensor.coefficient
      outdoor_temperature: sensor.outdoor_temperature_and_humidity_sensor_temperature
      nordpool: sensor.nordpool_kwh_fi_eur_2_10_0255
      room_temperature: sensor.bedroom_temperature_and_humidity_sensor_temperature
      room_size: input_boolean.bedroom_living_space
      min_temperature: input_boolean.bedroom_min_temperature  
      max_temperature: input_boolean.bedroom_max_temperature 
      heating_schedule_start_time: input_datetime.bedroom_heating_schedule_start_time
      heating_schedule_end_time: input_datetime.bedroom_heating_schedule_end_time
      current_year_average_price: sensor.current_year_average_price 
      pipeline_settings: sensor.bedroom_pipeline

- id: living_room_data_collection
  alias: Living Room data collection
  description: Check that all data is available before proceeding to data processing
  use_blueprint:
    path: homeassistant/heating/data_collection.yaml
    input:
      room_name: "Living_Room"
      coefficient: sensor.coefficient
      outdoor_temperature: sensor.outdoor_temperature_and_humidity_sensor_temperature
      nordpool: sensor.nordpool_kwh_fi_eur_2_10_0255
      room_temperature: sensor.living_room_temperature_and_humidity_sensor_temperature
      room_size: input_boolean.living_room_living_space
      min_temperature: input_boolean.living_room_min_temperature  
      max_temperature: input_boolean.living_room_max_temperature 
      heating_schedule_start_time: input_datetime.living_room_heating_schedule_start_time
      heating_schedule_end_time: input_datetime.living_room_heating_schedule_end_time
      current_year_average_price: sensor.current_year_average_price 
      pipeline_settings: sensor.living_room_pipeline

- id: main_bedroom_data_collection
  alias: Main Bedroom data collection
  description: Check that all data is available before proceeding to data processing
  use_blueprint:
    path: homeassistant/heating/data_collection.yaml
    input:
      room_name: "Main_Bedroom"
      coefficient: sensor.coefficient
      outdoor_temperature: sensor.outdoor_temperature_and_humidity_sensor_temperature
      nordpool: sensor.nordpool_kwh_fi_eur_2_10_0255
      room_temperature: sensor.main_bedroom_temperature_and_humidity_sensor_temperature
      room_size: input_boolean.main_bedroom_living_space
      min_temperature: input_boolean.main_bedroom_min_temperature  
      max_temperature: input_boolean.main_bedroom_max_temperature 
      heating_schedule_start_time: input_datetime.main_bedroom_heating_schedule_start_time
      heating_schedule_end_time: input_datetime.main_bedroom_heating_schedule_end_time
      current_year_average_price: sensor.current_year_average_price 
      pipeline_settings: sensor.main_bedroom_pipeline

- id: guest_bedroom_data_collection
  alias: Guest Bedroom data collection
  description: Check that all data is available before proceeding to data processing
  use_blueprint:
    path: homeassistant/heating/data_collection.yaml
    input:
      room_name: "Guest_Bedroom"
      coefficient: sensor.coefficient
      outdoor_temperature: sensor.outdoor_temperature_and_humidity_sensor_temperature
      nordpool: sensor.nordpool_kwh_fi_eur_2_10_0255
      room_temperature: sensor.guest_bedroom_temperature_and_humidity_sensor_temperature
      room_size: input_boolean.guest_bedroom_living_space
      min_temperature: input_boolean.guest_bedroom_min_temperature  
      max_temperature: input_boolean.guest_bedroom_max_temperature 
      heating_schedule_start_time: input_datetime.guest_bedroom_heating_schedule_start_time
      heating_schedule_end_time: input_datetime.guest_bedroom_heating_schedule_end_time
      current_year_average_price: sensor.current_year_average_price 
      pipeline_settings: sensor.guest_bedroom_pipeline